{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syllabus</title>
    <link rel="stylesheet" href="{% static 'webportal/css/syllabus.css' %}">
    <script>
        // JavaScript to handle dynamic display of subjects and syllabus
        function showSubjects(classId) {
            // Hide all subject lists
            document.querySelectorAll('.subject-list').forEach(list => list.style.display = 'none');
            // Show the selected class's subject list
            document.getElementById(`subjects-${classId}`).style.display = 'block';
            // Clear syllabus display
            document.getElementById('syllabus-display').innerHTML = '';
        }

        function showSyllabus(subjectId, syllabus) {
            // Display the syllabus for the selected subject
            const syllabusDisplay = document.getElementById('syllabus-display');
            syllabusDisplay.innerHTML = `<h3>Syllabus for ${subjectId}</h3><p>${syllabus}</p>`;
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Syllabus</h1>
        <div class="class-list">
            {% for school_class in schoolclass %}
            <div class="class-item" onclick="showSubjects('{{ school_class.id }}')">
                <h2>{{ school_class.class_name }}</h2>
            </div>
            <ul class="subject-list" id="subjects-{{ school_class.id }}" style="display: none;">
                {% for subject in school_class.subjects.all %}
                <li class="subject-item">
                    {% if subject.syllabi.exists %}
                    <span onclick="showSyllabus('{{ subject.syllabi.first.title|escapejs }}', '{{ subject.syllabi.first.content|escapejs }}')">
                        {{ subject.name }}
                    </span>
                    {% else %}
                    <span>No syllabus available</span>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
            {% endfor %}
        </div>
        <div id="syllabus-display" class="syllabus-display">
            <!-- Syllabus will be displayed here -->
        </div>
    </div>
</body>
</html>